/**
 * Horror Theme Icon Fixes
 *
 * This CSS file specifically targets and fixes black background issues
 * behind weather icons in the horror theme.
 *
 * =========================================================================
 * UNIVERSAL ICON BACKGROUND REMOVAL
 * =========================================================================
 */

/* Remove ANY background from icon-related elements */
.horror-theme *[class*='icon'],
.horror-theme *[class*='weather'],
.horror-theme *[class*='nav'],
.horror-theme *[id*='icon'],
.horror-theme *[id*='weather'],
.horror-theme *[id*='nav'] {
  background: transparent !important;
  background-color: transparent !important;
  backdrop-filter: none !important;
  box-shadow: none !important;
}

/* Specific navigation icon fixes */
.horror-theme .mobile-navigation .nav-icon,
.horror-theme .mobile-navigation .nav-tab .nav-icon,
.horror-theme .navigation-container .nav-icon {
  background: transparent !important;
  background-color: transparent !important;
  backdrop-filter: none !important;
  border: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}

/* ============================================================================
   HORROR THEME ICON CONTAINER FIXES
   ============================================================================ */

/* Fix all weather icon containers - ensure transparent backgrounds */
.horror-theme .weather-icon,
.horror-theme .weather-icon *,
.horror-theme .weather-icon-container,
.horror-theme .weather-icon-container *,
.horror-theme svg,
.horror-theme svg *,
.horror-theme .icon,
.horror-theme .icon * {
  background: transparent !important;
  background-color: transparent !important;
  backdrop-filter: none !important;
  box-shadow: none !important;
}

/* Specific icon styling for horror theme */
.horror-theme .weather-icon {
  filter: drop-shadow(0 0 12px rgba(139, 0, 0, 0.8)) sepia(0.2) contrast(1.1) !important;
  transition: all 0.3s ease !important;
  color: #ff6b6b !important;
  background: transparent !important;
  background-color: transparent !important;
}

.horror-theme .weather-icon:hover {
  filter: drop-shadow(0 0 20px rgba(139, 0, 0, 0.9)) sepia(0.4) contrast(1.3) !important;
  transform: scale(1.05) !important;
}

/* Fix SVG elements specifically */
.horror-theme svg {
  background: transparent !important;
  background-color: transparent !important;
  color: #ff6b6b !important;
  filter: drop-shadow(0 0 8px rgba(139, 0, 0, 0.6)) !important;
}

/* Fix horror weather icons (emoji-based) */
.horror-theme .horror-icon-animated,
.horror-theme .horror-icon-animated * {
  background: transparent !important;
  background-color: transparent !important;
  color: #ff6b6b !important;
  text-shadow: 0 0 10px rgba(139, 0, 0, 0.8) !important;
}

/* ============================================================================
   ICON PARENT CONTAINER FIXES
   ============================================================================ */

/* Fix icon containers in cards */
.horror-theme .weather-card .weather-icon,
.horror-theme .forecast-card .weather-icon,
.horror-theme .ios26-weather-card .weather-icon,
.horror-theme .modern-weather-card .weather-icon {
  background: transparent !important;
  background-color: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Fix icon containers in navigation */
.horror-theme .nav-button .weather-icon,
.horror-theme .nav-button svg,
.horror-theme .navigation-icon,
.horror-theme .mobile-navigation-icon,
.horror-theme .nav-icon,
.horror-theme .nav-tab .nav-icon,
.horror-theme .mobile-navigation .nav-icon,
.horror-theme .mobile-navigation .nav-tab {
  background: transparent !important;
  background-color: transparent !important;
  backdrop-filter: none !important;
  filter: drop-shadow(0 0 8px rgba(139, 0, 0, 0.6)) !important;
  color: #ff6b6b !important;
  border: none !important;
  box-shadow: none !important;
}

/* Ensure emoji icons in navigation have transparent backgrounds */
.horror-theme .nav-icon,
.horror-theme .nav-tab .nav-icon,
.horror-theme .mobile-navigation .nav-icon {
  background: transparent !important;
  background-color: transparent !important;
  border-radius: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  display: block !important;
  line-height: 1 !important;
  text-shadow: 0 0 8px rgba(139, 0, 0, 0.7) !important;
}

/* Fix icon containers in home screen grid */
.horror-theme .weather-icon-grid .weather-icon,
.horror-theme .weather-icon-grid svg,
.horror-theme .icon-item .weather-icon,
.horror-theme .icon-item svg {
  background: transparent !important;
  background-color: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* ============================================================================
   SPECIFIC COMPONENT ICON FIXES
   ============================================================================ */

/* Fix iOS26 component icons */
.horror-theme .ios26-weather-interface .weather-icon,
.horror-theme .ios26-weather-card .weather-icon,
.horror-theme .ios26-main-screen .weather-icon {
  background: transparent !important;
  background-color: transparent !important;
  color: #ff6b6b !important;
  filter: drop-shadow(0 0 10px rgba(139, 0, 0, 0.7)) !important;
}

/* Fix modern weather UI icons */
.horror-theme .modern-weather-card .weather-icon,
.horror-theme .modern-home-screen .weather-icon,
.horror-theme .enhanced-weather-card .weather-icon {
  background: transparent !important;
  background-color: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Fix progressive image icons */
.horror-theme .progressive-weather-icon,
.horror-theme .progressive-weather-icon * {
  background: transparent !important;
  background-color: transparent !important;
  color: #ff6b6b !important;
  text-shadow: 0 0 8px rgba(139, 0, 0, 0.6) !important;
}

/* ============================================================================
   UNIVERSAL ICON BACKGROUND OVERRIDE
   ============================================================================ */

/* Nuclear option - remove ANY background from icon-related elements */
.horror-theme *[class*='icon'],
.horror-theme *[class*='weather'],
.horror-theme *[id*='icon'],
.horror-theme *[id*='weather'] {
  background: transparent !important;
  background-color: transparent !important;
}

/* Ensure SVG fills and strokes work properly with horror theme */
.horror-theme svg path,
.horror-theme svg circle,
.horror-theme svg rect,
.horror-theme svg line,
.horror-theme svg polygon {
  background: transparent !important;
  background-color: transparent !important;
}

/* Fix any nested divs inside icon containers */
.horror-theme .weather-icon div,
.horror-theme .weather-icon span,
.horror-theme .icon div,
.horror-theme .icon span {
  background: transparent !important;
  background-color: transparent !important;
  color: inherit !important;
}

/* ============================================================================
   ICON GLOW AND ANIMATION EFFECTS
   ============================================================================ */

/* Enhanced horror glow for icons */
.horror-theme .weather-icon-animated {
  animation: horrorIconFloat 3s ease-in-out infinite !important;
}

@keyframes horrorIconFloat {
  0%,
  100% {
    transform: translateY(0) rotate(0deg);
    filter: drop-shadow(0 0 10px rgba(139, 0, 0, 0.6));
  }
  50% {
    transform: translateY(-3px) rotate(1deg);
    filter: drop-shadow(0 0 15px rgba(139, 0, 0, 0.8));
  }
}

/* Horror icon flicker effect */
.horror-theme .weather-icon.flickering {
  animation: horrorIconFlicker 2s infinite;
}

@keyframes horrorIconFlicker {
  0%,
  50%,
  100% {
    opacity: 1;
  }
  25%,
  75% {
    opacity: 0.7;
  }
}

/* ============================================================================
   RESPONSIVE ICON FIXES
   ============================================================================ */

@media (max-width: 768px) {
  .horror-theme .weather-icon,
  .horror-theme svg {
    filter: drop-shadow(0 0 8px rgba(139, 0, 0, 0.7)) !important;
  }

  .horror-theme .weather-icon:hover {
    filter: drop-shadow(0 0 15px rgba(139, 0, 0, 0.8)) !important;
    transform: scale(1.03) !important;
  }
}

/* ============================================================================
   ACCESSIBILITY AND HIGH CONTRAST
   ============================================================================ */

/* Ensure icons remain visible in high contrast mode */
@media (prefers-contrast: high) {
  .horror-theme .weather-icon,
  .horror-theme svg {
    filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.8)) contrast(1.5) !important;
    color: #ff6b6b !important;
  }
}

/* Ensure icons respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .horror-theme .weather-icon-animated,
  .horror-theme .horror-icon-animated {
    animation: none !important;
  }

  .horror-theme .weather-icon:hover {
    transform: none !important;
  }
}

/* ============================================================================
   EMERGENCY NAVIGATION ICON FIXES
   ============================================================================ */

/* SUPER AGGRESSIVE FIX: Target the exact MobileNavigation component structure */
.horror-theme .mobile-navigation div[role='button'] .nav-icon,
.horror-theme nav[aria-label='Main navigation'] div[role='button'] .nav-icon,
.horror-theme .mobile-navigation .nav-tab .nav-icon,
.horror-theme .mobile-navigation div.nav-tab div.nav-icon {
  background: transparent !important;
  background-color: transparent !important;
  background-image: none !important;
  backdrop-filter: none !important;
  border: none !important;
  box-shadow: none !important;
  padding: 4px !important;
  margin: 0 !important;
  border-radius: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-size: 24px !important;
  line-height: 1 !important;
  /* Default state: subtle horror theme color without glow */
  color: rgba(255, 107, 107, 0.7) !important;
  text-shadow: none !important;
  filter: none !important;
  transition: all 0.3s ease !important;
  width: auto !important;
  height: auto !important;
  min-width: auto !important;
  min-height: auto !important;
  max-width: none !important;
  max-height: none !important;
}

/* Override any inherited backgrounds from parent elements */
.horror-theme .mobile-navigation div[role='button'],
.horror-theme .mobile-navigation .nav-tab {
  /* Allow parent containers to have styling */
  position: relative;
  /* CRITICAL: Override global horror theme text-shadow */
  text-shadow: none !important;
  box-shadow: none !important;
  filter: none !important;
  border: none !important;
}

.horror-theme .mobile-navigation div[role='button'] > *,
.horror-theme .mobile-navigation .nav-tab > * {
  background: transparent !important;
  background-color: transparent !important;
  /* CRITICAL: Override any inherited glow effects */
  text-shadow: none !important;
  box-shadow: none !important;
  filter: none !important;
  border: none !important;
}

/* Fix for actual MobileNavigation component classes */
.horror-theme .mobile-navigation .nav-tab,
.horror-theme .mobile-navigation .nav-tab.active,
.horror-theme .mobile-navigation .nav-tab:hover {
  /* Allow tabs to have their own styling but ensure icons are clean */
  position: relative;
}

/* Default state: clean icons with subtle horror color */
.horror-theme .mobile-navigation .nav-tab .nav-icon {
  background: transparent !important;
  background-color: transparent !important;
  backdrop-filter: none !important;
  border: none !important;
  box-shadow: none !important;
  padding: 4px !important;
  margin: 0 !important;
  border-radius: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-size: 24px !important;
  line-height: 1 !important;
  color: rgba(255, 107, 107, 0.6) !important;
  text-shadow: none !important;
  filter: none !important;
  transition: all 0.3s ease !important;
}

/* Hover state: add red glow around the entire tab */
.horror-theme .mobile-navigation .nav-tab:hover {
  box-shadow: 0 0 15px rgba(139, 0, 0, 0.6) !important;
  border-radius: 0 !important;
  background: rgba(139, 0, 0, 0.1) !important;
}

.horror-theme .mobile-navigation .nav-tab:hover .nav-icon {
  background: transparent !important;
  filter: brightness(1.2) !important;
  transform: scale(1.05) !important;
}

/* Active state: enhanced red glow around the entire tab */
.horror-theme .mobile-navigation .nav-tab.active {
  box-shadow: 0 0 20px rgba(139, 0, 0, 0.8) !important;
  border-radius: 0 !important;
  background: rgba(139, 0, 0, 0.2) !important;
}

.horror-theme .mobile-navigation .nav-tab.active .nav-icon {
  background: transparent !important;
  filter: brightness(1.3) !important;
  transform: scale(1.08) !important;
}

/* Ensure hover and active states work - ULTRA HIGH SPECIFICITY */
.horror-theme nav[aria-label='Main navigation'] .nav-tab:hover,
.horror-theme .mobile-navigation div[role='button']:hover {
  box-shadow: 0 0 15px rgba(139, 0, 0, 0.6) !important;
  border-radius: 0 !important;
  background: rgba(139, 0, 0, 0.1) !important;
}

.horror-theme nav[aria-label='Main navigation'] .nav-tab:hover .nav-icon,
.horror-theme .mobile-navigation div[role='button']:hover .nav-icon {
  background: transparent !important;
  filter: brightness(1.2) !important;
  transform: scale(1.05) !important;
}

.horror-theme nav[aria-label='Main navigation'] .nav-tab.active,
.horror-theme .mobile-navigation div[role='button'].active {
  box-shadow: 0 0 20px rgba(139, 0, 0, 0.8) !important;
  border-radius: 0 !important;
  background: rgba(139, 0, 0, 0.2) !important;
}

.horror-theme nav[aria-label='Main navigation'] .nav-tab.active .nav-icon,
.horror-theme .mobile-navigation div[role='button'].active .nav-icon {
  background: transparent !important;
  filter: brightness(1.3) !important;
  transform: scale(1.08) !important;
}

/* Navigation labels should also have clean default state */
.horror-theme .mobile-navigation .nav-label,
.horror-theme .mobile-navigation .nav-tab .nav-label,
.horror-theme .mobile-navigation span {
  text-shadow: none !important;
  box-shadow: none !important;
  filter: none !important;
  border: none !important;
  color: rgba(255, 107, 107, 0.6) !important;
  transition: all 0.3s ease !important;
}

/* Hover state for labels */
.horror-theme .mobile-navigation .nav-tab:hover .nav-label,
.horror-theme .mobile-navigation .nav-tab:hover span {
  color: rgba(255, 107, 107, 0.8) !important;
  text-shadow: 0 0 6px rgba(139, 0, 0, 0.3) !important;
}

/* Active state for labels */
.horror-theme .mobile-navigation .nav-tab.active .nav-label,
.horror-theme .mobile-navigation .nav-tab.active span {
  color: #ff6b6b !important;
  text-shadow: 0 0 8px rgba(139, 0, 0, 0.6) !important;
}

/* Nuclear option: Remove backgrounds from all navigation elements */
.horror-theme .mobile-navigation *,
.horror-theme .nav-tab *,
.horror-theme .navigation-container * {
  background: transparent !important;
  background-color: transparent !important;
}

/* Specifically target emoji icons in navigation - clean default state */
.horror-theme .nav-icon {
  background: transparent !important;
  background-color: transparent !important;
  backdrop-filter: none !important;
  border: none !important;
  box-shadow: none !important;
  padding: 4px !important;
  margin: 0 !important;
  border-radius: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-size: 24px !important;
  line-height: 1 !important;
  /* Clean default state: subtle color, no glow */
  color: rgba(255, 107, 107, 0.6) !important;
  text-shadow: none !important;
  filter: none !important;
  transition: all 0.3s ease !important;
}

/* Ensure navigation tabs themselves don't have backgrounds affecting icons */
.horror-theme .nav-tab {
  background: transparent !important;
}

/* Hover and active states handled above with more specific selectors */

/* ============================================================================
   NUCLEAR OPTION: ALL EMOJI AND ICON FIXES
   ============================================================================ */

/* Ultimate fix: Any element with nav-icon class - clean default state */
.horror-theme .nav-icon,
.horror-theme [class*='nav-icon'],
.horror-theme [class*='icon'] {
  background: transparent !important;
  background-color: transparent !important;
  background-image: none !important;
  backdrop-filter: none !important;
  border: none !important;
  box-shadow: none !important;
  outline: none !important;
  text-decoration: none !important;
  position: relative !important;
  z-index: 10 !important;
  padding: 4px !important;
  margin: 0 !important;
  border-radius: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-size: 24px !important;
  line-height: 1 !important;
  /* Clean default: subtle color, no glow until hover/active */
  color: rgba(255, 107, 107, 0.6) !important;
  text-shadow: none !important;
  filter: none !important;
  transition: all 0.3s ease !important;
}

/* Additional safety: Override any inherited styles */
.horror-theme .mobile-navigation * {
  background-color: transparent !important;
}

.horror-theme .mobile-navigation .nav-icon {
  background: transparent !important;
}

/* SUPER SPECIFIC: Clean default state only */
.horror-theme .mobile-navigation .nav-tab:not(:hover, .active) .nav-icon {
  text-shadow: none !important;
  box-shadow: none !important;
  filter: none !important;
  color: rgba(255, 107, 107, 0.6) !important;
}

/* Final fallback: Override any browser-specific emoji rendering */
.horror-theme .nav-icon::before,
.horror-theme .nav-icon::after {
  background: transparent !important;
  background-color: transparent !important;
}

/* Webkit-specific emoji override */
.horror-theme .nav-icon {
  -webkit-text-stroke: 0 !important;
  -webkit-text-fill-color: inherit !important;
  -webkit-background-clip: text !important;
  background-clip: text !important;
}
