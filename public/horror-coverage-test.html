<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>🎃 Horror Quote Coverage Test & Fix</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: linear-gradient(
          135deg,
          #0d0d0d 0%,
          #1a0000 50%,
          #000000 100%
        );
        color: #ff6b6b;
        margin: 0;
        padding: 0;
        min-height: 100vh;
      }

      .test-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
      }

      .main-content-area {
        background: rgba(26, 0, 0, 0.3);
        border: 1px solid #8b0000;
        border-radius: 12px;
        padding: 20px;
        margin: 20px 0;
        min-height: 400px;
      }

      .button-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin: 20px 0;
      }

      .test-button {
        background: #667eea;
        color: white;
        border: none;
        border-radius: 8px;
        padding: 12px 16px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
        text-align: center;
      }

      .test-button:hover {
        background: #5a67d8;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }

      .test-button.secondary {
        background: #4a5568;
      }

      .test-button.secondary:hover {
        background: #2d3748;
      }

      .test-button.danger {
        background: #e53e3e;
      }

      .test-button.danger:hover {
        background: #c53030;
      }

      .content-sections {
        display: grid;
        gap: 20px;
        margin: 20px 0;
      }

      .content-section {
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid #666;
        border-radius: 8px;
        padding: 15px;
      }

      .log-area {
        background: rgba(0, 0, 0, 0.8);
        border: 1px solid #8b0000;
        border-radius: 8px;
        padding: 15px;
        font-family: monospace;
        font-size: 14px;
        max-height: 300px;
        overflow-y: auto;
        white-space: pre-wrap;
      }

      /* Test horror quote styles */
      .horror-quote-overlay,
      .horror-weather-quote {
        background: rgba(0, 0, 0, 0.85) !important;
        border: 1px solid #8b0000 !important;
        border-radius: 8px !important;
        padding: 15px !important;
        margin: 20px auto !important;
        max-width: 80% !important;
        color: #ff6b6b !important;
        text-align: center !important;
        font-style: italic !important;
        box-shadow: 0 0 10px rgba(139, 0, 0, 0.3) !important;
        position: relative !important;
        display: block !important;
        z-index: 1 !important;
        max-height: 150px !important;
        overflow: hidden !important;
      }

      .horror-weather-quote::before {
        content: '"';
        font-size: 1.5em;
        position: absolute;
        top: 5px;
        left: 10px;
        color: #8b0000;
      }

      .horror-weather-quote::after {
        content: '"';
        font-size: 1.5em;
        position: absolute;
        bottom: 5px;
        right: 10px;
        color: #8b0000;
      }

      .mobile-nav-simulation {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        height: 70px;
        background: rgba(0, 0, 0, 0.9);
        border-top: 1px solid #333;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        justify-content: space-around;
        z-index: 1000;
      }

      .nav-item {
        color: #666;
        font-size: 20px;
        text-align: center;
        padding: 10px;
      }

      .nav-item.active {
        color: #667eea;
      }

      @media (max-width: 480px) {
        .test-container {
          padding: 10px;
        }

        .button-grid {
          grid-template-columns: 1fr;
          gap: 10px;
        }

        .test-button {
          padding: 10px 12px;
          font-size: 14px;
        }
      }
    </style>
  </head>
  <body>
    <div class="test-container">
      <h1>🎃 Horror Quote Coverage Test & Fix</h1>

      <div class="button-grid">
        <button class="test-button" onclick="runDiagnosis()">
          🔍 Run Diagnosis
        </button>
        <button class="test-button secondary" onclick="showQuote()">
          👻 Show Quote
        </button>
        <button class="test-button secondary" onclick="hideQuote()">
          🙈 Hide Quote
        </button>
        <button class="test-button" onclick="repositionQuote()">
          🔧 Reposition Quote
        </button>
        <button class="test-button" onclick="applyFix()">⚡ Apply Fix</button>
        <button class="test-button danger" onclick="clearLog()">
          🧹 Clear Log
        </button>
      </div>

      <div class="main-content-area">
        <h2>📱 Weather App Content Simulation</h2>

        <div class="content-sections">
          <div class="content-section">
            <h3>🌤️ Weather Information</h3>
            <p>Current temperature: 72°F</p>
            <p>Conditions: Partly cloudy</p>
            <p>Wind: 5 mph</p>
          </div>

          <div class="content-section">
            <h3>📍 Location Services</h3>
            <div class="button-grid">
              <button class="test-button">🌤️ Check Weather</button>
              <button class="test-button secondary">📍 Find Locations</button>
            </div>
          </div>

          <div class="content-section">
            <h3>📊 Forecast</h3>
            <p>Tomorrow: Sunny, 75°F</p>
            <p>Thursday: Cloudy, 68°F</p>
            <p>Friday: Rain, 62°F</p>
          </div>
        </div>

        <!-- Horror quote should appear here at the bottom -->
        <div class="horror-weather-quote" id="test-quote" style="display: none">
          <div class="quote-text">
            The darkness is coming... and it knows the weather.
          </div>
          <div class="quote-attribution">
            <span class="quote-author">— Jason Voorhees</span>,
            <span class="quote-movie"> Friday the 13th</span>
          </div>
        </div>
      </div>

      <div class="log-area" id="log-area">
        🎃 Horror Quote Coverage Test Ready 📱 Screen size:
        <span id="screen-info"></span>
        ✅ Use buttons above to test quote positioning ⚠️ The quote should
        appear at the bottom of the weather content, not covering anything
      </div>
    </div>

    <!-- Mobile navigation simulation -->
    <div class="mobile-nav-simulation">
      <div class="nav-item active">🏠</div>
      <div class="nav-item">🌤️</div>
      <div class="nav-item">🔍</div>
      <div class="nav-item">⭐</div>
      <div class="nav-item">⚙️</div>
    </div>

    <script>
      let quoteVisible = false;

      function log(message) {
        const logArea = document.getElementById('log-area');
        const timestamp = new Date().toLocaleTimeString();
        logArea.textContent += `\n[${timestamp}] ${message}`;
        logArea.scrollTop = logArea.scrollHeight;
      }

      function updateScreenInfo() {
        const screenInfo = document.getElementById('screen-info');
        screenInfo.textContent = `${window.innerWidth}x${window.innerHeight}`;
      }

      function showQuote() {
        const quote = document.getElementById('test-quote');
        quote.style.display = 'block';
        quoteVisible = true;
        log('👻 Quote shown');

        setTimeout(() => {
          const rect = quote.getBoundingClientRect();
          const coverage =
            ((rect.width * rect.height) /
              (window.innerWidth * window.innerHeight)) *
            100;
          log(`📊 Quote covers ${coverage.toFixed(1)}% of screen`);
        }, 100);
      }

      function hideQuote() {
        const quote = document.getElementById('test-quote');
        quote.style.display = 'none';
        quoteVisible = false;
        log('🙈 Quote hidden');
      }

      function runDiagnosis() {
        log('🔍 Running coverage diagnosis...');

        const quote = document.getElementById('test-quote');
        if (!quoteVisible || quote.style.display === 'none') {
          log('⚠️ Quote not visible - showing it first');
          showQuote();
          setTimeout(runDiagnosis, 200);
          return;
        }

        const rect = quote.getBoundingClientRect();
        const computedStyle = window.getComputedStyle(quote);

        log(
          `📐 Dimensions: ${rect.width.toFixed(0)}x${rect.height.toFixed(0)}`
        );
        log(
          `📍 Position: top=${rect.top.toFixed(0)}, left=${rect.left.toFixed(
            0
          )}`
        );
        log(`🎯 CSS Position: ${computedStyle.position}`);
        log(`🔢 Z-index: ${computedStyle.zIndex}`);

        const coverage =
          ((rect.width * rect.height) /
            (window.innerWidth * window.innerHeight)) *
          100;
        log(`📊 Screen coverage: ${coverage.toFixed(1)}%`);

        const issues = [];
        if (coverage > 25)
          issues.push(`High coverage: ${coverage.toFixed(1)}%`);
        if (rect.width > window.innerWidth * 0.9) issues.push('Width too wide');
        if (parseInt(computedStyle.zIndex) > 10)
          issues.push('Z-index too high');
        if (
          computedStyle.position === 'fixed' ||
          computedStyle.position === 'absolute'
        )
          issues.push('Using fixed/absolute positioning');

        if (issues.length === 0) {
          log('✅ No issues detected');
        } else {
          log(`🚨 Issues: ${issues.join(', ')}`);
        }
      }

      function repositionQuote() {
        log('🔧 Repositioning quote...');

        const quote = document.getElementById('test-quote');
        const contentArea = document.querySelector('.main-content-area');

        if (!contentArea) {
          log('❌ No content area found');
          return;
        }

        // Move quote to end of content area if not already there
        if (!contentArea.contains(quote)) {
          quote.remove();
          contentArea.appendChild(quote);
          log('📦 Moved quote to content area');
        }

        // Apply positioning fix
        quote.style.cssText = `
                display: block !important;
                position: relative !important;
                margin: 20px auto !important;
                max-width: 80% !important;
                width: auto !important;
                z-index: 1 !important;
                background: rgba(0, 0, 0, 0.85) !important;
                border: 1px solid #8b0000 !important;
                color: #ff6b6b !important;
                padding: 15px !important;
                border-radius: 8px !important;
                text-align: center !important;
                font-style: italic !important;
                max-height: 120px !important;
                overflow: hidden !important;
                clear: both !important;
            `;

        quoteVisible = true;
        log('✅ Applied positioning fix');

        setTimeout(runDiagnosis, 200);
      }

      function applyFix() {
        log('⚡ Applying comprehensive fix...');

        // First reposition
        repositionQuote();

        // Then apply responsive adjustments
        const quote = document.getElementById('test-quote');
        const isSmallScreen = window.innerWidth < 480;
        const isShortScreen = window.innerHeight < 600;

        if (isSmallScreen || isShortScreen) {
          quote.style.maxWidth = '95%';
          quote.style.padding = '10px';
          quote.style.fontSize = '14px';
          quote.style.maxHeight = '100px';
          quote.style.margin = '15px auto';
          log('📱 Applied mobile optimizations');
        }

        // Add bottom margin for mobile nav
        if (window.innerWidth < 768) {
          quote.style.marginBottom = '80px';
          log('📱 Added mobile navigation clearance');
        }

        setTimeout(() => {
          log('🔄 Re-testing after fix...');
          runDiagnosis();
        }, 300);
      }

      function clearLog() {
        document.getElementById('log-area').textContent = '🧹 Log cleared\n';
        updateScreenInfo();
      }

      // Initialize
      updateScreenInfo();
      window.addEventListener('resize', updateScreenInfo);

      // Auto-show quote after 2 seconds
      setTimeout(() => {
        log('🤖 Auto-showing quote for testing...');
        showQuote();
      }, 2000);

      log('🎃 Horror Quote Coverage Test initialized');
    </script>
  </body>
</html>
